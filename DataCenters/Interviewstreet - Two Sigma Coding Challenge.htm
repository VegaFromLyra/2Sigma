<!DOCTYPE html>
<!-- saved from url=(0118)https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/51ddda8530d0f/?rparam=af922c0a7d8f4add2329aa7ea34361b6 -->
<html xmlns="http://www.w3.org/1999/xhtml" class="is_webkit chrome"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="x-ua-compatible" content="IE=8">
	    <!-- Chartbeat code starts here -->
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <!-- Chartbeat code ends here -->
	<title>Interviewstreet - Two Sigma Coding Challenge</title>
        <!--<base href="https://www.interviewstreet.com/recruit/">--><base href=".">
        
        <link rel="stylesheet" type="text/css" href="./Interviewstreet - Two Sigma Coding Challenge_files/userstyles.20131205091010.css">
        <link rel="stylesheet" href="./Interviewstreet - Two Sigma Coding Challenge_files/theme.css" type="text/css">
        <link rel="shortcut icon" href="https://www.interviewstreet.com/favicon.ico">
        <script type="text/javascript">
            window.cdn_url = "https://d3rpyts3de3lx8.cloudfront.net/recruit/";
            window.base_url = "https://www.interviewstreet.com/recruit/";
        </script>
            <link rel="stylesheet" href="./Interviewstreet - Two Sigma Coding Challenge_files/common.css" charset="ISO-8859-1" type="text/css"></head>
    <body id="public" class="noI">
      <!--[if lt IE 7]>
      <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
        <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
        <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
          <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
          <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
            <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
            <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
          </div>
          <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox 3.5'/></a></div>
          <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 8'/></a></div>
          <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari 4'/></a></div>
          <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
        </div>
      </div>
      <![endif]-->
        
        <div id="container" class="container">
            <h1>
                <img src="./Interviewstreet - Two Sigma Coding Challenge_files/39907.jpg" alt="">
            </h1>
                <div class="right" style="padding-bottom:10px;">[ asha.ab@gmail.com ]</div>

              <div id="progressbar-panel" class="expand">
        <div class="trigger">
          <img src="./Interviewstreet - Two Sigma Coding Challenge_files/progress_vertical.png" alt="Progress" title="Progress panel">
        </div>
        <div class="progress">
        <div class="progress-hd">Progress</div>
          <a id="progress-close" href="https://www.interviewstreet.com/recruit/#"><img src="./Interviewstreet - Two Sigma Coding Challenge_files/close.png" alt="Close button" title="Close panel"></a>
          <ul id="progress-list">
                          <li>
                  <div class="panel-qprogress"><a href="https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/51dc45df75a0c">Question 1</a></div>
                  <div class="panel-qstatus"></div>
                  <div style="clear:both;"></div>
                  </li>
                          <li class="focussed" id="progress-currentq">
                  <div class="panel-qprogress"><a href="https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/51ddda8530d0f">Question 2</a></div>
                  <div class="panel-qstatus"></div>
                  <div style="clear:both;"></div>
                  </li>
                      </ul>
        </div>
      </div>
      <script type="text/javascript">
      (function(){
          /* Scroll the focussed element */
          /* Javascript is here instead of bottom because the scroll script gives a flickering effect when we give time for page to load*/
          var progressUlNode       = document.getElementById('progress-list');
          var scrollLength         = document.getElementById('progress-currentq').offsetTop - progressUlNode.offsetTop;
          progressUlNode.scrollTop = scrollLength - 100;
      })();
      </script>
      
            <div id="content" class="container">
                <div class="info span-24">
                    <div class="span-17">
                        <h2>Two Sigma Coding Challenge</h2>
                    </div>
                    <div class="span-7 last m" style="padding:0px;">
<a href="https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/?hash=26657d5ff9020d2abefe558796b99584">Back to Question List</a>
                        <div id="timer" class="hasCountdown">Time Remaining:  00:05:28</div>
                    </div>
                </div> <!-- #info -->
            </div> <!-- #content -->

            <div class="container">
            <form action="https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/51ddda8530d0f" method="post" accept-charset="utf-8" id="testquestion" class="wufoo" enctype="multipart/form-data">            <input type="hidden" id="tid" name="tid" value="51dc4f0ce955b">
            <input type="hidden" id="qid" name="qid" value="51ddda8530d0f">
            <input type="hidden" id="autosave" name="autosave" value="">
				<ul>
					<li class="section first">
                        <div class="m"><strong>Question 2 / 2</strong></div>
                        <div class="question"><p>Oh no! Disaster has struck some of ACME's redundant data centers. The&nbsp;administrators have managed to restore backups, but some data sets are&nbsp;still missing from some data centers. Fortunately, every data set can be&nbsp;found at least once in one or more of the data centers. However, before&nbsp;ACME can resume normal operations, it needs to ensure that each data&nbsp;center has a copy of every data set.</p>

<p>Your goal is to help ACME resume normal operations by writing a program&nbsp;to synchronize data sets between data centers using as few copies as&nbsp;possible.</p>

<p>&nbsp;</p>

<p><u>Input:</u></p>

<p>The first line of input will contain an integer between 0 and 999999&nbsp;inclusive, representing the number of data centers.</p>

<p>Following that will be one line of input for each data center. Each line will contain an integer from 0 to 299 representing the number of data sets at that data center, followed by a space and space-separated list of data&nbsp;set ids currently present at that data center. Data set ids are each&nbsp;an integer between 1 and 999999, inclusive. Each line will be at most&nbsp;999 characters long.</p>

<p>Data set ids are not necessarily consecutive. The list of data sets&nbsp;will not be in any particular order.</p>

<p><br>
<u>Output:</u></p>

<p>The program must output an optimal data set copy strategy to ensure that&nbsp;every data center has a copy of every data set. Output one line for every&nbsp;copy instruction.</p>

<p>A copy instruction is of the form &lt;data-set-id&gt; &lt;from&gt; &lt;to&gt;, where&nbsp;&lt;data-set-id&gt; is the data set id, &lt;from&gt; is the index of the data center&nbsp;the data set will be copied from (1 = the first data center), and &lt;to&gt;&nbsp;is the index of the data center to copy the data set to.</p>

<p>When there are no more copy instructions, the program must output the&nbsp;word "done" on a line by itself.</p>

<p>There is often more than one correct output with minimal number of&nbsp;operations for a given input, and any output that satisfies the&nbsp;requirements is valid.</p>

<p><u>Constraints:</u></p>

<p>The code you submit must take input from stdin and produce output to&nbsp;stdout as specified above. No other output is permitted. You can&nbsp;assume the input will be valid.</p>

<p>&nbsp;</p>

<p>Example 1:<br>
----------<br>
Input:</p>

<p>4<br>
3 1 3 4<br>
3 1 2 3<br>
2 1 3<br>
3 1 4 2</p>

<p>One Possible Correct Output:</p>

<p>2 2 1<br>
4 1 2<br>
2 2 3<br>
4 4 3<br>
3 1 4<br>
done</p>

<p><br>
Example 2:<br>
----------<br>
Input:</p>

<p>2<br>
2 1 2<br>
2 2 1</p>

<p>Output:</p>

<p>done</p>

<p><br>
Example 3:<br>
----------<br>
Input:</p>

<p>3<br>
5 1 3 4 5 7<br>
2 1 3<br>
1 2</p>

<p>One Possible Correct Output:</p>

<p>2 3 2<br>
2 3 1<br>
1 1 3<br>
4 1 2<br>
5 1 3<br>
5 3 2<br>
4 2 3<br>
3 1 3<br>
7 1 2<br>
7 1 3<br>
done</p></div>
					</li>


<div id="download-test-cases" style="margin-bottom:20px;">
<img src="./Interviewstreet - Two Sigma Coding Challenge_files/download.png">&nbsp;&nbsp;<a target="_blank" href="https://www.interviewstreet.com/recruit/test/downloadsamplecase/51ddda8530d0f/">Download sample testcases as zip</a> <small> ['Compile &amp; Test' will run your code against these testcases. Avoid using Notepad for viewing these testcases] </small> </div>
<input type="hidden" id="frames_json" name="frames_json">

<style type="text/css">
/* IE7 fix for tiny fonts - caused by clash with Wufoo. Sigh */
    div {
        font-size: 1em !important;
    }
</style>
<div id="codeshell">
<div id="codeAreaMarkup">            <div id="language-switcher">                            <span style="margin-right: 10px"> Pick your language </span>                                        <a href="https://www.interviewstreet.com/recruit/#" onclick="return false;" class="language-tab active power" data-lang="c"> C </a>                            <a href="https://www.interviewstreet.com/recruit/#" onclick="return false;" class="language-tab" data-lang="cpp"> C++ </a>                            <a href="https://www.interviewstreet.com/recruit/#" onclick="return false;" class="language-tab" data-lang="java"> Java </a>                    </div>            <textarea id="codeArea" name="answer" style="display: none;"></textarea><div class="CodeMirror cm-s-default"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea wrap="off" autocorrect="off" autocapitalize="off" style="position: absolute; padding: 0px; width: 1px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-hscrollbar" style="left: 29px;"><div style="height: 1px;"></div></div><div class="CodeMirror-vscrollbar"><div style="width: 1px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative; min-height: 100%;"><div class="CodeMirror-sizer" style="min-width: 807px; margin-left: 29px; min-height: 88px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span class="cm-meta">#</span><span class="cm-meta">i</span><span class="cm-meta">n</span><span class="cm-meta">c</span><span class="cm-meta">l</span><span class="cm-meta">u</span><span class="cm-meta">d</span><span class="cm-meta">e</span><span class="cm-meta"> </span><span class="cm-meta">&lt;</span><span class="cm-meta">s</span><span class="cm-meta">t</span><span class="cm-meta">d</span><span class="cm-meta">i</span><span class="cm-meta">o</span><span class="cm-meta">.</span><span class="cm-meta">h</span><span class="cm-meta">&gt;</span></pre></div><div style="position: relative; z-index: 1; display: none;"></div><div style=""><div style="position: relative;"><div style="position: absolute; left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 20px;">1</div></div><pre><span class="cm-meta">#include &lt;stdio.h&gt;</span></pre></div><div style="position: relative;"><div style="position: absolute; left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 20px;">2</div></div><pre><span class="cm-keyword">int</span> <span class="cm-word">main</span>() {</pre></div><div style="position: relative;"><div style="position: absolute; left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 20px;">3</div></div><pre>    <span class="cm-comment">/* Enter your code here. Read input from STDIN. Print output to STDOUT */</span></pre></div><div style="position: relative;"><div style="position: absolute; left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 20px;">4</div></div><pre>    <span class="cm-keyword">return</span> <span class="cm-number">0</span>;</pre></div><div style="position: relative;"><div style="position: absolute; left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 20px;">5</div></div><pre>}</pre></div></div><pre class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 16px;">&nbsp;</pre><pre class="CodeMirror-cursor CodeMirror-secondarycursor" style="display: none;">&nbsp;</pre></div></div></div></div><div style="position: absolute; height: 30px; top: 88px;">&nbsp;</div><div class="CodeMirror-gutters"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 28px;"></div></div></div></div></div>            <input type="hidden" id="langInput" name="lang" value="c">            <div id="keyboard-shortcuts" style="cursor: pointer">                                <img src="./Interviewstreet - Two Sigma Coding Challenge_files/keyboard.png"> Keyboard Shortcuts Available                    <span id="shortcuts-list" style="display:none; color: #888">                                            Alt-C - <strong>Compile</strong>                                        Ctrl-Space - <strong>Autocomplete</strong>. Ctrl-Z - <strong>Undo</strong>. Ctrl-R - <strong>Redo</strong></span>                    </div>        </div></div>
<script type="text/javascript">
var codeStorage = {"c":{"code":"#include <stdio.h>\nint main() {\n    \/* Enter your code here. Read input from STDIN. Print output to STDOUT *\/\n    return 0;\n}","startLine":1},"cpp":{"code":"#include <iostream>\nusing namespace std;\nint main() {\n    \/* Enter your code here. Read input from STDIN. Print output to STDOUT *\/\n    return 0;\n}","startLine":1},"java":{"code":"import java.io.*;\npublic class Solution {\n    public static void main(String args[] ) throws Exception {\n        \/* Enter your code here. Read input from STDIN. Print output to STDOUT *\/\n    }\n}","startLine":1}};
</script>

<li class="buttons">

<button name="compileandTest" type="button" id="compileandTest" class="submit long">Compile &amp; Test</button><input type="submit" name="" value="Submit Answer" id="saveForm" class="submit long">
</li> <!-- .buttons -->

				</ul>
            </form>            </div>
			<div id="compileandTestOuput" style="padding-left:20px;"></div>
<div class="container">
    <div id="footer" class="m span-24">
    <div style="padding: 10px 0px"> <center><small> <i> &nbsp; &nbsp; Powered by </i> </small></center></div> <a href="http://www.interviewstreet.com/" target="_blank"><img src="./Interviewstreet - Two Sigma Coding Challenge_files/logo.png" alt="Interviewstreet" title="Interviewstreet" border="0" width="80" height="28"></a></div>
</div>
        </div>  <!-- #container -->
        <!-- Chartbeat code starts here -->
        <script type="text/javascript">
            var _sf_async_config={uid:34206,domain:"recruit.interviewstreet.com"};
            (function(){
              function loadChartbeat() {
                window._sf_endpt=(new Date()).getTime();
                var e = document.createElement('script');
                e.setAttribute('language', 'javascript');
                e.setAttribute('type', 'text/javascript');
                e.setAttribute('src',
                   (("https:" == document.location.protocol) ? "https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/" : "http://static.chartbeat.com/") +
                   "js/chartbeat.js");
                document.body.appendChild(e);
              }
              var oldonload = window.onload;
              window.onload = (typeof window.onload != 'function') ?
                 loadChartbeat : function() { oldonload(); loadChartbeat(); };
            })();
        </script>
        <!-- Chartbeat code ends here -->
    
<script type="text/javascript" src="./Interviewstreet - Two Sigma Coding Challenge_files/jquery.min.js"></script>
<script type="text/javascript" src="./Interviewstreet - Two Sigma Coding Challenge_files/userscripts.20131205091010.js"></script>
<script type="text/javascript" src="./Interviewstreet - Two Sigma Coding Challenge_files/codeshellscripts.20131205091010.js"></script>
<link rel="stylesheet" type="text/css" href="./Interviewstreet - Two Sigma Coding Challenge_files/codeshellstyles.20131205091010.css">
<!-- <script type="text/javascript" src="https://use.typekit.com/afp2pqr.js"></script> -->
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<textarea id="lastAttemptCode" style="display:none"></textarea>


<script type="text/javascript">

function gotoFullScreen() {
var el = document.documentElement, rfs =
           el.requestFullScreen
        || el.webkitRequestFullScreen
        || el.mozRequestFullScreen
        || el.msRequestFullScreen
;
if(typeof rfs!="undefined" && rfs) {
  rfs.call(el);
} else if(typeof window.ActiveXObject!="undefined") {
  // for Internet Explorer
  var wscript = new ActiveXObject("WScript.Shell");
  if (wscript!=null) {
     wscript.SendKeys("{F11}");
  }
}
}

$(document).ready(function() {
     var startIdleTime = null;
     var lastIdleTime = null;
     var lastIdleDate = null;
     var timeDiff = null;
     var totalIdleTime = null;
     var idleTimeout = 15 * 1000;
     $.idleTimer(idleTimeout);
     $(document).bind('idle.idleTimer', function() {
         lastIdleDate = new Date();
         lastIdleTime = Date.UTC(lastIdleDate.getFullYear(), lastIdleDate.getMonth(), lastIdleDate.getDate(), lastIdleDate.getHours(), lastIdleDate.getMinutes(), lastIdleDate.getSeconds(), lastIdleDate.getMilliseconds()) - idleTimeout;
         //lastIdleTime = (new Date()).getTime() - idleTimeout;
         startIdleTime = lastIdleTime;
     });

     $(document).bind('active.idleTimer', function() {
         var curDate = new Date();
         var curTime = Date.UTC(curDate.getFullYear(), curDate.getMonth(), curDate.getDate(), curDate.getHours(), curDate.getMinutes(), curDate.getSeconds(), curDate.getMilliseconds());
         timeDiff = curTime - lastIdleTime;
         pingServer();
         lastIdleTime = null;
         startIdleTime = null;
     });

     function pingServer(){
                  if(lastIdleTime) {
             var curDate = new Date();
             var curTime = Date.UTC(curDate.getFullYear(), curDate.getMonth(), curDate.getDate(), curDate.getHours(), curDate.getMinutes(), curDate.getSeconds(), curDate.getMilliseconds());
             timeDiff = curTime - lastIdleTime;
             lastIdleTime = curTime;
         }

         totalIdleTime = curTime - startIdleTime;
              var data = {
                aid: "664382"
         };
         if(timeDiff) {
             data.idle = timeDiff;
         }
         if(totalIdleTime) {
             data.total_idle = totalIdleTime;
         }
                  var answer = $("#codeshell").codeShell('getValue');
         var lang = $("#codeshell").codeShell('getCurrentLanguage');
         data.qid = 107869;
         data.answer = answer;
         data.lang = lang;
                  $.ajax({
             data: data,
             url: window.base_url + "test/ping/51dc4f0ce955b/",
             type: 'POST',
             timeout: 2000
         });
              timeDiff = null;
     }

    
    
     
    
        var currentTestAndCompileData;

        var question_id = $("#qid").val();

        var current_user_hash = readCookie('userhash');
        var local_storage_key = current_user_hash + '-' + question_id ;
        $('#customTestCase').click(function(){
            $('#customTestInput')[0].style.display = this.checked?'block':'none';
        });


        // If the local storage has some data for this particular question, then show that.
        // Else, show server data. Server data can never be null, even for the first time.

        var local_submission_data = $.jStorage.get(local_storage_key);
        var server_submission_data = {
            language : "",
            answer : $("#lastAttemptCode").val()
        };

        var display_language = null;
        if(local_submission_data !== null && local_submission_data.language !== null && local_submission_data.language != '' ){
            codeStorage[local_submission_data.language]['code']  = local_submission_data.answer;
            display_language = local_submission_data.language;
        }
        else if(server_submission_data !== null && server_submission_data.language !== null && server_submission_data.language != ''){
            codeStorage[server_submission_data.language]['code'] = server_submission_data.answer;
            display_language = server_submission_data.language;
        }

        // Now initialize the code editor
        $("#codeshell").codeShell({
            currentLanguage: display_language,
            codeStorage: codeStorage,
            onCompile: function(editor) {
                $("#compileandTest").click();
            },
            keyboardImage: "https://d3rpyts3de3lx8.cloudfront.net/recruit/images/keyboard.png"
        });

        // Save the user's code every 60 seconds
        $.doTimeout( 60000, function(){
            var current_question_data = {
                answer: $("#codeshell").codeShell('getValue'),
                language: $("#codeshell").codeShell('getCurrentLanguage')
            }
            $.jStorage.set(local_storage_key, current_question_data);
            return true;
        });
        $(".tooltip").qtip({
            position: {
                my: "top center",
                at: "bottom center"
            },
            style: {
                classes: 'ui-tooltip-shadow ui-tooltip-rounded'
            }
        });

        $('#saveForm').click(function(){
            var answer = $("#codeshell").codeShell('getValue');
            var lang = $("#codeshell").codeShell('getCurrentLanguage');

            // Save it to local storage first
            var current_question = {
                answer: answer,
                language: lang
            };
            $.jStorage.set(local_storage_key, current_question)
            return true;
        });

        $("#compileandTest").click(function() {

            // Disable compile and test for two seconds
            $("#compileandTest").attr("disabled", true);
            $.doTimeout(2000, function(){
                $("#compileandTest").attr('disabled', false);
                return false;
            });

            // Show a loading button
            // TODO: this is ugly way of doing it. Show it in a nice way
            $("#compileandTestOuput").html("<img src='https://d3rpyts3de3lx8.cloudfront.net/recruit/images/running.gif' alt='' align='left'> &nbsp;&nbsp;&nbsp;<span id='compileandTestOuputStatus'>Compiling your code</span>. Please wait...");

            // Get the latest code and language from editor
            var answer = $("#codeshell").codeShell('getValue');
            var lang = $("#codeshell").codeShell('getCurrentLanguage');

            // Save it to local storage first
            var current_question = {
                answer: answer,
                language: lang
            };
            $.jStorage.set(local_storage_key, current_question)

            // Submit to server and show compile and test output
            $.post("test/compiletest/",
            {
                "qid": question_id,
                "answer": answer,
                "lang": lang ,
                "sample": true,
                "test_hash" : "51dc4f0ce955b"
                            }, function(data) {
                if (data.status === "error") {
                    $("#compileandTestOuput").html(data.message);
                } else {
                    handleCodeCompile(data);
                }

            }, "json");

            return false;
        });


        $(".compileandTestAll").live('click', function() {
            // Disable compile and test for two seconds

            $("#compileandTest").attr("disabled", true);
            $(".compileandTestAll").attr("disabled", true);
            $.doTimeout(5000, function(){
                $("#compileandTest").attr('disabled', false);
                $(".compileandTestAll").attr('disabled', false);
                return false;
            });


            // Show a loading button
            // TODO: this is ugly way of doing it. Show it in a nice way
            $("#compileandTestOuput").html("<img src='https://d3rpyts3de3lx8.cloudfront.net/recruit/images/running.gif' alt='' align='left'> &nbsp;&nbsp;&nbsp;<span id='compileandTestOuputStatus'>Compiling your code</span>. Please wait...");

            // Get the latest code and language from editor
            var answer = $("#codeshell").codeShell('getValue');
            var lang = $("#codeshell").codeShell('getCurrentLanguage');

            // Save it to local storage first
            var current_question = {
                answer: answer,
                language: lang
            };
            $.jStorage.set(local_storage_key, current_question)



            // Submit to server and show compile and test output
            $.post("test/compiletest/",
            {
                "qid": question_id,
                "answer": answer,
                "lang": lang ,
                "sample": false,
                "test_hash" : "51dc4f0ce955b"
                            }, function(data) {

                if (data.status === "error") {
                    $("#compileandTestOuput").html(data.message);
                } else {
                    handleCodeCompile(data);
                }

            }, "json");

            return false;
        });


        function processEvent(data, eventData) {
            if (eventData.event === "ended") {
                $("#compileandTestOuput").html(eventData.html);
            } else {
                if (eventData.event === "cc_compiled")
                    $("#compileandTestOuputStatus").text('Compiled your code. Now running against test cases.');
                if (eventData.event === "cc_all_test_cases_done")
                    $("#compileandTestOuputStatus").text('Ran against all test cases. Now verifying them.');

                if (eventData.html)
                    $("#compileandTestOuput").html($("#compileandTestOuput").html() + eventData.html);

            }
            $(".tooltip").qtip({
                position: {
                    my: "top center",
                    at: "bottom center"
                },
                style: {
                    classes: 'ui-tooltip-shadow ui-tooltip-rounded'
                }
            });
        }

        var timeoutId,
            lastStatusId,
            noChangeAttempts = 0;

        function clearTimer() {
            if (timeoutId) {
                window.clearTimeout(timeoutId);
                timeoutId = 0;
                lastStatusId = 0;
                noChangeAttempts = 0;
            }
        }
        function setTimer(fn) {
            timeoutId = window.setTimeout(fn, 2000);
        }

        function getLatest () {
            var url = 'compileandtest/status/' + currentTestAndCompileData.catid;

            if (lastStatusId) {
                url += '/' + lastStatusId;
            }
            $.getJSON(url , function (response) {
                //$("#compileandTestOuput").html(response);
                var last;
                if (response.length) {
                    $.each(response, function (ix, ev) {
                        processEvent(currentTestAndCompileData, ev);
                    });
                    last = response[response.length - 1];
                    if (last.event === "ended") {
                        return clearTimer();
                    }
                    lastStatusId = last.id;
                    noChangeAttempts = 0
                } else {
                    noChangeAttempts++;
                }
                //has waited for more than three minutes and there is no status change
                if (noChangeAttempts > 105) {
                    //set appropriate message
                    $("#compileandTestOuput").text('Your request has timed out. Can you please try again.');
                    return clearTimer();
                }
                setTimer(getLatest);
            });
        }

        function handleCodeCompile(data) {

            clearTimer();

            currentTestAndCompileData = data;

            setTimer(getLatest);

            /*$("#compileandTestOuput").html(data);
                $('html, body').animate({ scrollTop: $('#compileandTestOuput').offset().top }, 'fast');
                $('.view-diff-link').click(function(){
                    $(this).parent().next().slideToggle();
                    return false;
                });*/

        }

        // Handle recording.
            

                        $(document).ready(function() {
                function showTimerWarning(ticks) {
                    var timeRemaining = $.countdown.periodsToSeconds(ticks);
                    if (timeRemaining == 120) { $.notifyBar({  cls: "error", html: "This test will end in 2 minutes. Please click on 'Submit answer' for your answer to be evaluated.", delay: 5000, animationSpeed: "normal" }); }
                    if (timeRemaining == 300) { $.notifyBar({  cls: "error", html: "This test will end in 5 minutes. Please click on 'Submit answer' for your answer to be evaluated.", delay: 5000, animationSpeed: "normal" }); }
                    if (timeRemaining < 300) { $("#timer").css('background', '#8e2800'); }
                    if (timeRemaining < 5) { testDone = true; }

                                        if (timeRemaining % 60 == 0) {
                       pingServer();
                    }
                                    }

                function showSectionTimerWarning(ticks) {
                    var timeRemaining = $.countdown.periodsToSeconds(ticks);
                    if (timeRemaining == 120) { $.notifyBar({  cls: "error", html: "This section will end in 2 minutes. Please click on 'Submit answer' for your answer to be evaluated.", delay: 5000, animationSpeed: "normal" }); }
                    if (timeRemaining == 300) { $.notifyBar({  cls: "error", html: "This section will end in 5 minutes. Please click on 'Submit answer' for your answer to be evaluated.", delay: 5000, animationSpeed: "normal" }); }
                    if (timeRemaining < 300) { $("#timer").css('background', '#8e2800'); }
                    if (timeRemaining < 5) { testSectionDone = true; }

                                        if (timeRemaining % 60 == 0) {
                       pingServer();
                    }
                                    }

                var d = new Date();
                d.setTime(d.getTime() + 391000);
                                $('#timer').countdown({until: d, layout: 'Time Remaining: {d<}{dn}{dl} {d>} {hnn}:{mnn}:{snn}', expiryUrl: 'test/view/51dc4f0ce955b/done/', onTick: showTimerWarning, compact: true});
                            });
            });

    if(self!=parent) {
        window.onload = init;
        $(this).bind( "ajaxComplete", init);
    }

    function init() {
        $.postMessage({ if_height: $('body').outerHeight( true )}, '' );
    }

</script>

<!-- Enable Copy/Paste Contextmenu protection -->

<script type="text/javascript">
/*    mpq.name_tag('asha.ab@gmail.com');
    mpq.track('Page Load Time', {'CI Benchmark Time' : 0.2020, 'Test ID' : '51dc4f0ce955b',  'Question ID' : '51ddda8530d0f'});
    window.onerror = function(message, url, linenumber) {
        mpq.track("Javascript error", { 'message': message, 'url': url, 'linenumber': linenumber});
    }*/
</script>


<script>
    var submitClicked = false;
    var textareaChanged = false;
    var globalFirstLoad = true;
    var testDone = false;

    $(document).ready(function() {

        $("#move-nextQuestion").click(function() { window.location = "https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b//?randhash=828121"; });
        $("#move-prevQuestion").click(function() { window.location = "https://www.interviewstreet.com/recruit/test/view/51dc4f0ce955b/51dc45df75a0c/?randhash=932306"; });

        prettyPrint();

        $("#saveForm").click(function() {
            submitClicked = true;
                        // Save the language the user used to code as a cookie, so that it can be reused
            var current_language = $(".currentlanguageblock a").attr('id');
            $.cookie("user_language", current_language, { path: "/" });
                    });
        $("#textarea_2").bind("change", function() { textareaChanged = true; });

    });

    $(window).bind('beforeunload', function() {
        if (submitClicked == true || testDone == true) { return; }
            if (textareaChanged == true) {
                return "You haven't saved your answer. If you navigate away from this page, you might LOSE your changes.";
            }
        var dirtyLanguages = $("#codeshell").codeShell("getDirtyLanguages");
        if (dirtyLanguages.length > 0) {
            var langText = "";
            $.each(dirtyLanguages, function(i, lang) {
                if(i == dirtyLanguages.length - 1) { // Last Element
                    langText += lang;
                } else if (i == dirtyLanguages.length - 2) {
                    langText += lang + " and ";
                } else {
                    langText += lang + ", ";
                }
            });
            var langWarning = "You have unsaved " + langText + " code.\nPlease submit your code before leaving the page";
            return langWarning;
        }
    });


    (function(){
      /* Toggle the panel show & hide*/
      var togglePanel = function(){
        if ($('#progressbar-panel').hasClass('collapse'))
        {
          $('#progressbar-panel').addClass('expand');
          $('#progressbar-panel').removeClass('collapse');
          $('#progressbar-panel .progress').animate({'left':'-3px'}, 500);
          $.cookie('progresspanel-pref-new', 'expand', { path: "/"});
        }
        else
        {
          $('#progressbar-panel .progress').animate({'left':'-150px'}, 500, function(){
            $('#progressbar-panel').addClass('collapse');
            $('#progressbar-panel').removeClass('expand');
            $.cookie('progresspanel-pref-new', 'collapse', { path: "/"} );
          });
        }
        return false;
      }

      /* Listeners */
      $('.trigger').click(togglePanel);
      $('#progress-close').click(togglePanel);
    })();


</script>
<!-- 10.37.15.111 -->
<script language="javascript" type="text/javascript" src="./Interviewstreet - Two Sigma Coding Challenge_files/chartbeat.js"></script></body></html>